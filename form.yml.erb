<%-
  partitions = OodAppkit.clusters[:SLURM_CLUSTER].custom_config[:partitions]
-%>
---
cluster: "SLURM_CLUSTER"
attributes:
  custom_environment:
    widget: text_area
    label: Environment Setup
    value: |
      # If you would like to load other modules
      # or add other things in your environment please list below
      #
      # format:
      # module load example_module/VERSION example_module2
      # export PATH=....

  bc_num_hours:
    value: 1

  bc_num_slots:
    label: Number of CPU
    value: 1
    min: 1
    max: 24
    step: 1

  bc_num_mems:
    widget: "number_field"
    label: Memory per CPU (GB)
    value: 4
    min: 1
    max: 128
    step: 1

  bc_partition:
    widget: select
    label: Partition
    options:
    <%- partitions.each do |p| -%>
      - [ "<%= p %>", "<%= p %>" ]
    <%- end -%>

  version:
    widget: select
    label: "MATLAB version"
    help: "This defines the version of MATLAB you want to load."
    options:
      - [ "R2022a", "rc/matlab/R2022a"]
      - [ "R2021b", "rc/matlab/R2021b"]
      - [ "R2021a", "rc/matlab/R2021a"]
      - [ "R2020a", "rc/matlab/R2020a"]
      - [ "R2019b", "rc/matlab/R2019b"]
      - [ "R2019a", "rc/matlab/R2019a"]
      - [ "R2018a", "rc/matlab/R2018a"]
      - [ "R2017b", "rc/matlab/R2017b"]
      - [ "R2017a", "rc/matlab/R2017a"]
      - [ "R2016b", "rc/matlab/R2016b"]
      - [ "R2016a", "rc/matlab/R2016a"]
      - [ "R2015a", "rc/matlab/R2015a"]
      - [ "R2013a", "rc/matlab/R2013a"]
      - [ "R2012a", "rc/matlab/R2012a"]

  cuda_toolkit: "cuda10.0/toolkit"

form:
  - custom_environment
  - version
  - bc_num_hours
  - bc_partition
  - bc_num_slots
  - bc_num_mems
  - bc_email_on_started
  - cuda_toolkit
